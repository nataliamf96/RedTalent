<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Mis Datos</title>
    <link rel="icon" href="/images/us.ico">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/3-col-portfolio.css" rel="stylesheet">
    <link href="/css/cards.css" rel="stylesheet">
    <link href="/css/all.css" rel="stylesheet">
    <style>
        .card-profile2 {
            width: 100%;
            margin: 50px auto;
            background-color: #e6e5e1;
            border-radius: 0;
            border: 0;
            box-shadow: 1em 1em 2em rgba(0, 0, 0, 0.2);
        }
        .card-profile2 .card-img-top {
            border-radius: 0;
        }
        .card-profile2 .card-img-profile {
            max-width: 100%;
            border-radius: 50%;
            margin-top: -95px;
            margin-bottom: 35px;
            border: 5px solid #e6e5e1;
        }

        .card-profile2 .card-title {
            margin-bottom: 50px;
        }
        .card-profile2 .card-title small {
            display: block;
            font-size: 0.6em;
            margin-top: 0.2em;
        }
        .card-profile2 .card-links {
            margin-bottom: 25px;
        }
        .card-profile2 .card-links .fa {
            margin: 0 1em;
            font-size: 1.6em;
        }
        .card-profile2 .card-links .fa:focus, .card-profile .card-links .fa:hover {
            text-decoration: none;
        }
        .card-profile2 .card-links .fa.fa-dribbble {
            color: #ea4b89;
            font-weight: bold;
        }
        .card-profile2 .card-links .fa.fa-dribbble:hover {
            color: #e51d6b;
        }
        .card-profile2 .card-links .fa.fa-twitter {
            color: #68aade;
        }
        .card-profile2 .card-links .fa.fa-twitter:hover {
            color: #3e92d5;
        }
        .card-profile2 .card-links .fa.fa-facebook {
            color: #3b5999;
        }
        .card-profile2 .card-links .fa.fa-facebook:hover {
            color: #2d4474;
        }
    </style>
</head>
<body class="bg-light">
<div th:if="${auth.equals('USER')}">
    <div th:replace="masterpage/headerUser :: nav"></div>
</div>
<div th:if="${auth.equals('ADMIN')}">
    <div th:replace="masterpage/headerUser :: nav"></div>
</div>
<div th:if="${auth.equals('DIRECTIVO')}">
    <div th:replace="masterpage/headerUser :: nav"></div>
</div>
<div th:if="${auth.equals('')}">
    <div th:replace="masterpage/header :: nav"></div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-12 portfolio-item">
            <br />
            <br />
            <div style="margin-top: -12px" class='card card-profile2 text-center shadow-sm bg-white rounded'>
                <img alt='' class='card-img-top' style="max-height: 80px" th:src="@{/images/color-img.jpg}">
                <div class='card-block' style="margin-top: 47px">
                    <img alt='' class='card-img-profile' style="width: 90px; height: 90px; border-width: 2px; border-color: white" th:src="${user.getImage()}">
                    <h6 style="margin-top: -23px" class='card-title'>
                        <span th:text="${user.getFullname()}" /> <br />
                        <span style="font-size: 0.8em" th:text="${user.getAccount().getEmail()}"></span><br />
                    </h6>
                    <h6 th:if="${user.getCurriculum().getRealized()==true}" style="margin-top: -23px" class='card-title'>
                        <a style="color: grey" th:href="@{/user/filtrarPerfilGrado(grade=${user.getCurriculum().getGrade().getId()})}"><span style="font-size: 0.8em" th:text="${user.getCurriculum().getGrade().getName()}"></span></a><br />
                        <a style="color: black" th:href="${user.getCurriculum().getUrlLinkedin()}"><i class="fab fa-linkedin" style="color: #3b5999; font-size: 1.5em"></i></a>
                    </h6>
                    <div th:if="${user.getTags().size() != 0}" style="margin-top: -30px;text-align: left;margin-left: 25px; margin-right: 25px" class='card-title'>
                        <span th:each="tag : ${user.getTags()}" style="font-size: 0.9em; font-family: Calibri">
                            <a th:href="@{/user/filtrarPerfilesPorEtiquetas(tag=${tag.getName()})}"><span th:text="${tag.getName()}" class="badge badge-pill badge-info"></span></a>
                        </span>
                    </div>
                    <div th:if="${user.getCurriculum().getRealized()==true}" style="border-top: grey solid 1px;margin-top: -23px;text-align: left;margin-left: 25px; margin-right: 25px" class='card-title'>
                        <span style="font-size: 0.9em; font-family: Calibri" th:text="${user.getCurriculum().getDescription()}" />
                    </div>
                    <a th:if="${user.getCurriculum().getRealized()==false}" type="button" class="btn btn-info" href="/user/curriculum/createCurriculum">Añadir Mi Curriculum</a>
                    <a th:if="${user.getCurriculum().getRealized()==true}" type="button" class="btn btn-info" href="/user/curriculum/updateCurriculum">Actualizar Mi Curriculum</a>
                    <a type="button" class="btn btn-info" href="/user/cambiarContraseña">Modificar Contraseña</a>
                    <a type="button" class="btn btn-info" href="/user/updateUser">Modificar Datos de Usuario</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
            <table class="table table-bordered table-active">
                <thead>
                    <tr style="text-align: center; color: black">
                        <th onclick="verTablaProyecto()" scope="col"><i class="fas fa-project-diagram"></i>&nbsp;&nbsp;Proyectos</th>
                        <th onclick="verTablaEquipo()" scope="col"> <i class="fas fa-users"></i>&nbsp;&nbsp;Equipos</th>
                        <th onclick="verTablaComentario()" scope="col"><i class="fas fa-comment"></i>&nbsp;&nbsp;Comentarios</th>
                        <th onclick="verTablaRecomendacion()" scope="col"><i class="fas fa-comment-dots"></i>&nbsp;&nbsp;Recomendaciones</th>
                    </tr>
                </thead>
            </table>
        </div>
    <div class="row">
        <div class="col-12">
            <hr />
        </div>
    </div>
</div>
<div id="tablaProyectos" class="container">
    <h2>Proyectos</h2>
    <div class="row">
        <table class="table table-bordered table-active">
            <thead>
            <tr style="text-align: center; color: black">
                <th scope="col"><i class="fas fa-project-diagram"></i>&nbsp;&nbsp;Proyectos Creados</th>
                <th scope="col"><i class="fas fa-project-diagram"></i>&nbsp;&nbsp;Proyectos Participo</th>
            </tr>
            </thead>
        </table>
    </div>
    <div class="row">
        <div class="col-6">
            <div th:if="${projectsCreados.size() == 0}" class="row">
                <p style="margin-left: 16px;font-family: Calibri">No trabaja en ningún proyecto</p>
            </div>
            <div th:if="${projectsCreados.size() != 0}" class="row">
                <div th:each="project : ${projectsCreados}" class="col-lg-6 col-md-6 col-sm-12 portfolio-item">
                    <div class="card h-100">
                        <a th:href="@{/project/projectData(projectId=${project.getId()})}"><img class="card-img-top" th:src="${project.getImage()}"></a>
                        <div class="card-body">
                            <h4 class="card-title">
                                <a th:href="@{/project/projectData(projectId=${project.getId()})}" th:text="${project.getName()}"></a>
                            </h4>
                            <p class="card-text" th:if="${project.getDescription().length() < 150}" th:text="${project.getDescription()}"></p>
                            <p class="card-text" th:if="${project.getDescription().length() >= 150}" th:text="${project.getDescription().substring(0,120).concat('...')}"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div th:if="${projectsParticipo.size() == 0}" class="row">
                <p style="margin-left: 16px;font-family: Calibri">No trabaja en ningún proyecto</p>
            </div>
            <div th:if="${projectsParticipo.size() != 0}" class="row">
                <div th:each="project : ${projectsParticipo}" class="col-lg-6 col-md-6 col-sm-12 portfolio-item">
                    <div class="card h-100">
                        <a th:href="@{/project/projectData(projectId=${project.getId()})}"><img class="card-img-top" th:src="${project.getImage()}"></a>
                        <div class="card-body">
                            <h4 class="card-title">
                                <a th:href="@{/project/projectData(projectId=${project.getId()})}" th:text="${project.getName()}"></a>
                            </h4>
                            <p class="card-text" th:if="${project.getDescription().length() < 150}" th:text="${project.getDescription()}"></p>
                            <p class="card-text" th:if="${project.getDescription().length() >= 150}" th:text="${project.getDescription().substring(0,120).concat('...')}"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</div>
<div id="tablaEquipos" style="display: none" class="container">
    <h2>Equipos</h2>
    <div class="row">
        <table class="table table-bordered table-active">
            <thead>
            <tr style="text-align: center; color: black">
                <th scope="col"><i class="fas fa-project-diagram"></i>&nbsp;&nbsp;Equipos Creados</th>
                <th scope="col"><i class="fas fa-project-diagram"></i>&nbsp;&nbsp;Equipos Participo</th>
            </tr>
            </thead>
        </table>
    </div>
    <div class="row">
        <div class="col-6">
            <div th:if="${teamsCreados.size() == 0}" class="row">
                <p style="margin-left: 16px;font-family: Calibri">No tienes equipos creados</p>
            </div>
            <div style="margin-top: +20px" th:if="${teamsCreados.size() != 0}" class="row">
                <div th:each="team : ${teamsCreados}" class="col-lg-6 col-md-6 col-sm-12 portfolio-item">
                    <div class="card h-100">
                        <a th:href="@{/team/teamData(teamId=${team.getId()})}"><img class="card-img-top" th:src="${team.getImage()}"></a>
                        <div class="card-body">
                            <h4 class="card-title">
                                <a th:href="@{/team/teamData(teamId=${team.getId()})}" th:text="${team.getName()}"></a>
                            </h4>
                            <p class="card-text" th:if="${team.getDescription().length() < 150}" th:text="${team.getDescription()}"></p>
                            <p class="card-text" th:if="${team.getDescription().length() >= 150}" th:text="${team.getDescription().substring(0,120).concat('...')}"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div th:if="${teamsParticipo.size() == 0}" class="row">
                <p style="margin-left: 16px;font-family: Calibri">No tienes equipos creados</p>
            </div>
            <div style="margin-top: +20px" th:if="${teamsParticipo.size() != 0}" class="row">
                <div th:each="team : ${teamsParticipo}" class="col-lg-6 col-md-6 col-sm-12 portfolio-item">
                    <div class="card h-100">
                        <a th:href="@{/team/teamData(teamId=${team.getId()})}"><img class="card-img-top" th:src="${team.getImage()}"></a>
                        <div class="card-body">
                            <h4 class="card-title">
                                <a th:href="@{/team/teamData(teamId=${team.getId()})}" th:text="${team.getName()}"></a>
                            </h4>
                            <p class="card-text" th:if="${team.getDescription().length() < 150}" th:text="${team.getDescription()}"></p>
                            <p class="card-text" th:if="${team.getDescription().length() >= 150}" th:text="${team.getDescription().substring(0,120).concat('...')}"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="tablaComentarios" style="display: none" class="container">
    <h2>Comentarios</h2>
    <div th:if="${user.getCommentsReceived().size() == 0}" class="row">
        <p style="margin-left: 16px;font-family: Calibri">No tiene comentarios recibidos</p>
    </div>
    <div style="margin-top: +20px" th:if="${user.getCommentsReceived().size() != 0}" class="row">
        <div th:each="comment : ${user.getCommentsReceived()}" class="col-lg-4 col-md-6 col-sm-12 portfolio-item" style="margin-bottom: 16px">
            <div class="card h-100">
                    <span th:each="u : ${users}" th:if="${u.getComments().contains(comment)}">
                        <div class="row">
                            <div class="col-2">
                                <a th:href="@{/user/dataUser(userId=${u.getId()})}"><img alt='' class='card-img-profile' style="width: 35px; height: 35px;border-radius: 50%; border-width: 2px; border-color: white; margin: 14px 6px 6px 16px" th:src="${u.getImage()}"></a>
                            </div>
                            <div style="color: rgba(0,0,0,.6); font-family: Calibri" class="col-10">
                                <a th:href="@{/user/dataUser(userId=${u.getId()})}"><b><span style="display: block;margin-top: 5px;margin-left: 4px" th:text="${u.getFullname()}"></span></b></a>
                                <a th:if="${user.getCurriculum().getRealized()==true}" style="color: grey" th:href="@{/user/filtrarPerfilGrado(grade=${u.getCurriculum().getGrade().getId()})}"><span style="font-size: 0.8em; display: flex; margin-top: -5px;margin-left: 4px; margin-right: 4px" th:text="${u.getCurriculum().getGrade().getName()}"></span></a>
                            </div>
                        </div>
                    </span>
                <div class="card-body">
                    <b style="font-family: Calibri" th:text="${comment.getTitle()}"></b>
                    <p style="font-family: Calibri" th:text="${comment.getText()}"></p>
                    <div class="row">
                        <div class="col-6" style="text-align: left;font-size: 0.6em">
                            <a th:if="${user.getComments().contains(comment)}" th:href="@{/comment/delete(commentId=${comment.getId()})}"><i class="fas fa-trash"></i></a>
                        </div>
                        <div class="col-6" style="text-align: right;font-size: 0.6em">
                            <span th:text="${#dates.format(comment.getMoment(), 'dd-MM-yyyy')}"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="tablaRecomendaciones" style="display: none" class="container">
    <h2>Recomendaciones</h2>
    <div th:if="${user.getRecomendationsReceived().size() == 0}" class="row">
        <p style="margin-left: 16px;font-family: Calibri">No tiene recomendaciones recibidos</p>
    </div>
    <div style="margin-top: +20px" th:if="${user.getRecomendationsReceived().size() != 0}" class="row">
        <div th:each="comment : ${user.getRecomendationsReceived()}" class="col-lg-4 col-md-6 col-sm-12 portfolio-item" style="margin-bottom: 16px">
            <div class="card h-100">
                    <span th:each="u : ${users}" th:if="${u.getRecomendations().contains(comment)}">
                        <div class="row">
                            <div class="col-2">
                                <a th:href="@{/user/dataUser(userId=${u.getId()})}"><img alt='' class='card-img-profile' style="width: 35px; height: 35px;border-radius: 50%; border-width: 2px; border-color: white; margin: 14px 6px 6px 16px" th:src="${u.getImage()}"></a>
                            </div>
                            <div style="color: rgba(0,0,0,.6); font-family: Calibri" class="col-10">
                                <a th:href="@{/user/dataUser(userId=${u.getId()})}"><b><span style="display: block;margin-top: 5px;margin-left: 4px" th:text="${u.getFullname()}"></span></b></a>
                                <a style="color: grey" th:href="@{/user/filtrarPerfilGrado(grade=${u.getCurriculum().getGrade().getId()})}"><span th:if="${u.getCurriculum().getRealized()==true}" style="font-size: 0.8em; display: flex; margin-top: -5px;margin-left: 4px" th:text="${u.getCurriculum().getGrade().getName()}"></span></a>
                            </div>
                        </div>
                    </span>
                <div class="card-body">
                    <p style="font-family: Calibri" th:text="${comment.getText()}"></p>
                    <div class="row">
                        <div class="col-6" style="text-align: left;font-size: 0.6em">
                            <a th:if="${user.getRecomendations().contains(comment)}" th:href="@{/comment/delete(recomendationId=${comment.getId()})}"><i class="fas fa-trash"></i></a>
                        </div>
                        <div class="col-6" style="text-align: right;font-size: 0.6em">
                            <span th:text="${#dates.format(comment.getMoment(), 'dd-MM-yyyy')}"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function verTablaEquipo() {
        document.getElementById("tablaEquipos").style = "display: block";
        document.getElementById("tablaProyectos").style = "display: none";
        document.getElementById("tablaComentarios").style = "display: none";
        document.getElementById("tablaRecomendaciones").style = "display: none";
    }

    function verTablaProyecto() {
        document.getElementById("tablaProyectos").style = "display: block";
        document.getElementById("tablaEquipos").style = "display: none";
        document.getElementById("tablaComentarios").style = "display: none";
        document.getElementById("tablaRecomendaciones").style = "display: none";
    }

    function verTablaComentario() {
        document.getElementById("tablaProyectos").style = "display: none";
        document.getElementById("tablaEquipos").style = "display: none";
        document.getElementById("tablaComentarios").style = "display: block";
        document.getElementById("tablaRecomendaciones").style = "display: none";
    }

    function verTablaRecomendacion() {
        document.getElementById("tablaProyectos").style = "display: none";
        document.getElementById("tablaEquipos").style = "display: none";
        document.getElementById("tablaComentarios").style = "display: none";
        document.getElementById("tablaRecomendaciones").style = "display: block";
    }
</script>
<div th:replace="masterpage/footer :: footer" />
</body>
</html>