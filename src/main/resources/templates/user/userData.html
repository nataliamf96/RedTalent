<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Mis Datos</title>
    <link rel="icon" href="/images/us.ico">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/3-col-portfolio.css" rel="stylesheet">
    <link href="/css/cards.css" rel="stylesheet">
    <link href="/css/all.min.css" rel="stylesheet">
    <script>
        function verTablaEquipo() {
            document.getElementById("tablaProyectos").style = "display: none";
            document.getElementById("tablaEquipos").style = "display: block";
            document.getElementById("tablaComentarios").style = "display: none";
            document.getElementById("tablaRecomendaciones").style = "display: none";
        }

        function verTablaProyecto() {
            document.getElementById("tablaProyectos").style = "display: block";
            document.getElementById("tablaEquipos").style = "display: none";
            document.getElementById("tablaComentarios").style = "display: none";
            document.getElementById("tablaRecomendaciones").style = "display: none";
        }

        function verTablaComentario() {
            document.getElementById("tablaProyectos").style = "display: none";
            document.getElementById("tablaEquipos").style = "display: none";
            document.getElementById("tablaComentarios").style = "display: bock";
            document.getElementById("tablaRecomendaciones").style = "display: none";
        }

        function verTablaRecomendacion() {
            document.getElementById("tablaProyectos").style = "display: none";
            document.getElementById("tablaEquipos").style = "display: none";
            document.getElementById("tablaComentarios").style = "display: none";
            document.getElementById("tablaRecomendaciones").style = "display: bock";
        }
    </script>
    <style>
        .card-profile2 {
            width: 100%;
            margin: 50px auto;
            background-color: #e6e5e1;
            border-radius: 0;
            border: 0;
            box-shadow: 1em 1em 2em rgba(0, 0, 0, 0.2);
        }
        .card-profile2 .card-img-top {
            border-radius: 0;
        }
        .card-profile2 .card-img-profile {
            max-width: 100%;
            border-radius: 50%;
            margin-top: -95px;
            margin-bottom: 35px;
            border: 5px solid #e6e5e1;
        }

        .card-profile2 .card-title {
            margin-bottom: 50px;
        }
        .card-profile2 .card-title small {
            display: block;
            font-size: 0.6em;
            margin-top: 0.2em;
        }
        .card-profile2 .card-links {
            margin-bottom: 25px;
        }
        .card-profile2 .card-links .fa {
            margin: 0 1em;
            font-size: 1.6em;
        }
        .card-profile2 .card-links .fa:focus, .card-profile .card-links .fa:hover {
            text-decoration: none;
        }
        .card-profile2 .card-links .fa.fa-dribbble {
            color: #ea4b89;
            font-weight: bold;
        }
        .card-profile2 .card-links .fa.fa-dribbble:hover {
            color: #e51d6b;
        }
        .card-profile2 .card-links .fa.fa-twitter {
            color: #68aade;
        }
        .card-profile2 .card-links .fa.fa-twitter:hover {
            color: #3e92d5;
        }
        .card-profile2 .card-links .fa.fa-facebook {
            color: #3b5999;
        }
        .card-profile2 .card-links .fa.fa-facebook:hover {
            color: #2d4474;
        }
    </style>
</head>
<body class="bg-light">
<div th:if="${auth.equals('USER')}">
    <div th:replace="masterpage/headerUser :: nav"></div>
</div>
<div th:if="${auth.equals('ADMIN')}">
    <div th:replace="masterpage/headerUser :: nav"></div>
</div>
<div th:if="${auth.equals('DIRECTIVO')}">
    <div th:replace="masterpage/headerUser :: nav"></div>
</div>
<div th:if="${auth.equals('')}">
    <div th:replace="masterpage/header :: nav"></div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-12 portfolio-item">
            <br />
            <br />
            <div style="margin-top: -12px" class='card card-profile2 text-center shadow-sm bg-white rounded'>
                <img alt='' class='card-img-top' style="max-height: 80px" th:src="@{/images/color-img.jpg}">
                <div class='card-block' style="margin-top: 47px">
                    <img alt='' class='card-img-profile' style="width: 90px; height: 90px; border-width: 2px; border-color: white" th:src="${user.getImage()}">
                    <h6 style="margin-top: -23px" class='card-title'>
                        <span th:text="${user.getFullname()}" /> <br />
                        <span style="font-size: 0.8em" th:text="${user.getAccount().getEmail()}"></span><br />
                    </h6>
                    <h6 th:if="${user.getCurriculum().getRealized()==true}" style="margin-top: -23px" class='card-title'>
                        <span style="font-size: 0.8em" th:text="${user.getCurriculum().getGrade().getName()}"></span>
                        <a style="color: black" th:href="${user.getCurriculum().getUrlLinkedin()}"><i class="fab fa-linkedin" style="color: #3b5999; font-size: 1.5em"></i></a>
                    </h6>
                    <div th:if="${user.getCurriculum().getRealized()==true}" style="border-top: grey solid 1px;margin-top: -23px;text-align: left;margin-left: 25px; margin-right: 25px" class='card-title'>
                        <span style="font-size: 0.9em; font-family: Calibri" th:text="${user.getCurriculum().getDescription()}" />
                    </div>
                    </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
            <table class="table table-bordered table-active">
                <thead>
                    <tr style="text-align: center; color: white">
                        <th onclick="verTablaProyecto()" scope="col"><i class="fas fa-project-diagram"></i>&nbsp;&nbsp;Proyectos</th>
                        <th onclick="verTablaEquipo()" scope="col"> <i class="fas fa-users"></i>&nbsp;&nbsp;Equipos</th>
                        <th onclick="verTablaComentario()" scope="col"><i class="fas fa-comment"></i>&nbsp;&nbsp;Comentarios</th>
                        <th onclick="verTablaRecomendacion()" scope="col"><i class="fas fa-comment-dots"></i>&nbsp;&nbsp;Recomendaciones</th>
                    </tr>
                </thead>
            </table>
        </div>
    <div class="row">
        <div class="col-12">
            <hr />
        </div>
    </div>
</div>
<div id="tablaProyectos" class="container">
    <h2>Mis Proyectos</h2>
        <div th:if="${projects.size() == 0}" class="row">
            <div style="margin-top: -12px" class='card card-profile2 text-center col-12'>
                <h1 style="background-color: gold; margin-top: 10px">NO EXISTEN PROYECTOS</h1>
                <span style="margin-bottom: 10px">Crea tu primer proyecto <a href="/project/createProject">aquí</a></span>
            </div>
        </div>
        <div th:if="${projects.size() != 0}" class="row">
            <div th:each="project : ${projects}" th:if="${project.getCerrado()==false}" class="col-lg-4 col-md-6 col-sm-12 portfolio-item">
                <div class="card h-100">
                    <a th:href="@{/project/allProjectData(projectId=${project.getId()})}"><img class="card-img-top" th:src="${project.getImage()}"></a>
                    <div class="card-body">
                        <h4 class="card-title">
                            <a th:href="@{/project/allProjectData(projectId=${project.getId()})}" th:text="${project.getName()}"></a>
                        </h4>
                        <p class="card-text" th:if="${project.getDescription().length() < 150}" th:text="${project.getDescription()}"></p>
                        <p class="card-text" th:if="${project.getDescription().length() >= 150}" th:text="${project.getDescription().substring(0,120).concat('...')}"></p>
                    </div>
                </div>
            </div>
        </div>
</div>
<div id="tablaEquipos" style="display: none" class="container">
    <h2>Mis Equipos</h2>
    <div th:if="${user.getTeams().size() == 0}" class="row">
        <div style="margin-top: -12px" class='card text-center col-12'>
            <h2>No tiene ningún equipo creado</h2>
        </div>
    </div>
    <div style="margin-top: +20px" th:if="${user.getTeams().size() != 0}" class="row">
        <div th:each="team : ${user.getTeams()}" class="col-lg-4 col-md-6 col-sm-12 portfolio-item">
            <div class="card h-100">
                <a th:href="@{/team/teamData(teamId=${team.getId()})}"><img class="card-img-top" th:src="${team.getImage()}"></a>
                <div class="card-body">
                    <h4 class="card-title">
                        <a th:href="@{/team/teamData(teamId=${team.getId()})}" th:text="${team.getName()}"></a>
                    </h4>
                    <p class="card-text" th:if="${team.getDescription().length() < 150}" th:text="${team.getDescription()}"></p>
                    <p class="card-text" th:if="${team.getDescription().length() >= 150}" th:text="${team.getDescription().substring(0,120).concat('...')}"></p>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="tablaComentarios" style="display: none" class="container">
    <h2>Comentarios</h2>
    <div th:if="${user.getCommentsReceived().size() == 0}" class="row">
        <p>No tiene comentarios recibidos</p>
    </div>
    <div style="margin-top: +20px" th:if="${user.getCommentsReceived().size() != 0}" class="row">
        <div th:each="comment : ${user.getCommentsReceived()}" class="col-lg-4 col-md-6 col-sm-12 portfolio-item" style="margin-bottom: 16px">
            <div class="card h-100">
                    <span th:each="u : ${users}" th:if="${u.getComments().contains(comment)}">
                        <div class="row">
                            <div class="col-2">
                                <img alt='' class='card-img-profile' style="width: 35px; height: 35px;border-radius: 50%; border-width: 2px; border-color: white; margin: 14px 6px 6px 16px" th:src="${u.getImage()}">
                            </div>
                            <div style="color: rgba(0,0,0,.6); font-family: Calibri" class="col-10">
                                <b><span style="display: block;margin-top: 5px;margin-left: 4px" th:text="${u.getFullname()}"></span></b>
                                <span th:if="${u.getCurriculum().getRealized()==true}" style="font-size: 0.8em; display: flex; margin-top: -5px;margin-left: 4px" th:text="${u.getCurriculum().getGrade().getName()}"></span>
                            </div>
                        </div>
                    </span>
                <div class="card-body">
                    <b style="font-family: Calibri" th:text="${comment.getTitle()}"></b>
                    <p style="font-family: Calibri" th:text="${comment.getText()}"></p>
                    <span style="text-align: right" th:text="${#dates.format(comment.getMoment(), 'dd-MM-yyyy')}"></span>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="tablaRecomendaciones" style="display: none" class="container">
    <h2>Recomendaciones</h2>
    <div th:if="${user.getCommentsReceived().size() == 0}" class="row">
        <p>No tiene Recomendaciones</p>
    </div>
    <div style="margin-top: +20px" th:if="${user.getCommentsReceived().size() != 0}" class="row">
        <div th:each="comment : ${user.getCommentsReceived()}" class="col-lg-4 col-md-6 col-sm-12 portfolio-item" style="margin-bottom: 16px">
            <div class="card h-100">
                    <span th:each="u : ${users}" th:if="${u.getComments().contains(comment)}">
                        <div class="row">
                            <div class="col-2">
                                <img alt='' class='card-img-profile' style="width: 35px; height: 35px;border-radius: 50%; border-width: 2px; border-color: white; margin: 14px 6px 6px 16px" th:src="${u.getImage()}">
                            </div>
                            <div style="color: rgba(0,0,0,.6); font-family: Calibri" class="col-10">
                                <b><span style="display: block;margin-top: 5px;margin-left: 4px" th:text="${u.getFullname()}"></span></b>
                                <span th:if="${u.getCurriculum().getRealized()==true}" style="font-size: 0.8em; display: flex; margin-top: -5px;margin-left: 4px" th:text="${u.getCurriculum().getGrade().getName()}"></span>
                            </div>
                        </div>
                    </span>
                <div class="card-body">
                    <b style="font-family: Calibri" th:text="${comment.getTitle()}"></b>
                    <p style="font-family: Calibri" th:text="${comment.getText()}"></p>
                    <span style="text-align: right" th:text="${#dates.format(comment.getMoment(), 'dd-MM-yyyy')}"></span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-12 portfolio-item">
            <a type="button" class="btn btn-info" href="/user/cambiarContraseña">Modificar Contraseña</a>
            <a type="button" class="btn btn-info" href="/user/updateUser">Modificar Datos de Usuario</a>
            <a th:if="${user.getCurriculum().getRealized()==false}" type="button" class="btn btn-info" href="/user/curriculum/createCurriculum">Añadir Mi Curriculum</a>
            <a th:if="${user.getCurriculum().getRealized()==true}" type="button" class="btn btn-info" href="/user/curriculum/updateCurriculum">Actualizar Mi Curriculum</a>
        </div>
    </div>
</div>
<div th:replace="masterpage/footer :: footer" />
</body>
</html>